aws emr create-cluster --applications Name=Hadoop Name=Hive Name=Pig Name=Hue Name=Spark Name=HCatalog Name=TensorFlow --ec2-attributes '{"KeyName":"EveryDay","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-0ba0c452","EmrManagedSlaveSecurityGroup":"sg-5ee5d72b","EmrManagedMasterSecurityGroup":"sg-fde5d788"}' --release-label emr-5.19.0 --log-uri 's3n://aws-logs-377200973048-us-east-1/elasticmapreduce/' --instance-groups '[{"InstanceCount":4,"BidPrice":"OnDemandPrice","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"CORE","InstanceType":"m4.2xlarge","Name":"Core - 2"},{"InstanceCount":1,"BidPrice":"OnDemandPrice","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"MASTER","InstanceType":"m4.large","Name":"Master - 1"}]' --configurations '[{"Classification":"zeppelin-env","Properties":{},"Configurations":[{"Classification":"export","Properties":{"ZEPPELIN_NOTEBOOK_S3_BUCKET":"target-osteosarcoma","ZEPPELIN_NOTEBOOK_STORAGE":"org.apache.zeppelin.notebook.repo.S3NotebookRepo","ZEPPELIN_NOTEBOOK_USER":"sdavis2"},"Configurations":[]}]},{"Classification":"spark-defaults","Properties":{"spark.jars.packages":"com.databricks:spark-xml_2.11:0.4.1,org.elasticsearch:elasticsearch-spark-20_2.11:jar:6.5.0,org.postgresql:postgresql:42.2.5"},"Configurations":[]},{"Classification":"spark","Properties":{"maximizeResourceAllocation":"true"},"Configurations":[]},{"Classification":"spark-env","Properties":{},"Configurations":[{"Classification":"export","Properties":{"PYSPARK_PYTHON":"python34","PYSPARK_DRIVER_PYTHON":"ipython"},"Configurations":[]}]},{"Classification":"hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]},{"Classification":"spark-hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]}]' --auto-scaling-role EMR_AutoScaling_DefaultRole --bootstrap-actions '[{"Path":"s3://emrdata.cancerdatasci.org/emr_bootstrap.sh","Name":"Custom action"}]' --ebs-root-volume-size 10 --service-role EMR_DefaultRole --enable-debugging --name 'My cluster' --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region us-east-1
#aws emr create-cluster --applications Name=Hadoop Name=Hive Name=Pig Name=Hue Name=Spark Name=HCatalog Name=TensorFlow --ec2-attributes '{"KeyName":"EveryDay","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-0ba0c452","EmrManagedSlaveSecurityGroup":"sg-5ee5d72b","EmrManagedMasterSecurityGroup":"sg-fde5d788"}' --release-label emr-5.19.0 --log-uri 's3n://aws-logs-377200973048-us-east-1/elasticmapreduce/' --instance-groups '[{"InstanceCount":2,"BidPrice":"OnDemandPrice","AutoScalingPolicy":{"Constraints":{"MinCapacity":2,"MaxCapacity":4},"Rules":[{"Action":{"SimpleScalingPolicyConfiguration":{"ScalingAdjustment":1,"CoolDown":300,"AdjustmentType":"CHANGE_IN_CAPACITY"}},"Description":"","Trigger":{"CloudWatchAlarmDefinition":{"MetricName":"YARNMemoryAvailablePercentage","ComparisonOperator":"LESS_THAN","Statistic":"AVERAGE","Period":300,"Dimensions":[{"Value":"${emr.clusterId}","Key":"JobFlowId"}],"EvaluationPeriods":1,"Unit":"PERCENT","Namespace":"AWS/ElasticMapReduce","Threshold":15}},"Name":"Default-scale-out-1"},{"Action":{"SimpleScalingPolicyConfiguration":{"ScalingAdjustment":1,"CoolDown":300,"AdjustmentType":"CHANGE_IN_CAPACITY"}},"Description":"","Trigger":{"CloudWatchAlarmDefinition":{"MetricName":"ContainerPendingRatio","ComparisonOperator":"GREATER_THAN","Statistic":"AVERAGE","Period":300,"Dimensions":[{"Value":"${emr.clusterId}","Key":"JobFlowId"}],"EvaluationPeriods":1,"Unit":"COUNT","Namespace":"AWS/ElasticMapReduce","Threshold":0.75}},"Name":"Default-scale-out-2"},{"Action":{"SimpleScalingPolicyConfiguration":{"ScalingAdjustment":-1,"CoolDown":300,"AdjustmentType":"CHANGE_IN_CAPACITY"}},"Description":"","Trigger":{"CloudWatchAlarmDefinition":{"MetricName":"YARNMemoryAvailablePercentage","ComparisonOperator":"GREATER_THAN","Statistic":"AVERAGE","Period":300,"Dimensions":[{"Value":"${emr.clusterId}","Key":"JobFlowId"}],"EvaluationPeriods":1,"Unit":"PERCENT","Namespace":"AWS/ElasticMapReduce","Threshold":75}},"Name":"Default-scale-in"}]},"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"CORE","InstanceType":"m4.2xlarge","Name":"Core - 2"},{"InstanceCount":1,"BidPrice":"OnDemandPrice","EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":32,"VolumeType":"gp2"},"VolumesPerInstance":1}]},"InstanceGroupType":"MASTER","InstanceType":"m4.large","Name":"Master - 1"}]' --configurations '[{"Classification":"zeppelin-env","Properties":{},"Configurations":[{"Classification":"export","Properties":{"ZEPPELIN_NOTEBOOK_S3_BUCKET":"target-osteosarcoma","ZEPPELIN_NOTEBOOK_STORAGE":"org.apache.zeppelin.notebook.repo.S3NotebookRepo","ZEPPELIN_NOTEBOOK_USER":"sdavis2"},"Configurations":[]}]},{"Classification":"spark-defaults","Properties":{"spark.jars.packages":"com.databricks:spark-xml_2.11:0.4.1,org.elasticsearch:elasticsearch-spark-20_2.11:jar:6.5.0,org.postgresql:postgresql:42.2.5"},"Configurations":[]},{"Classification":"spark","Properties":{"maximizeResourceAllocation":"true"},"Configurations":[]},{"Classification":"spark-env","Properties":{},"Configurations":[{"Classification":"export","Properties":{"PYSPARK_PYTHON":"python34","PYSPARK_DRIVER_PYTHON":"ipython"},"Configurations":[]}]},{"Classification":"hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]},{"Classification":"spark-hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]}]' --auto-scaling-role EMR_AutoScaling_DefaultRole --bootstrap-actions '[{"Path":"s3://emrdata.cancerdatasci.org/emr_bootstrap.sh","Name":"Custom action"}]' --ebs-root-volume-size 10 --service-role EMR_DefaultRole --enable-debugging --name 'My cluster' --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region us-east-1
